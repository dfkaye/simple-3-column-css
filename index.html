<!DOCTYPE html>
<html>
  <head>
    <title>simple three-column css layout</title>
    <link rel='stylesheet' href='./css/3-column.css' />
    <link rel='stylesheet' href='./css/nested-3-column.css' />
    <link rel='stylesheet' href='./css/test-page.css' />
  </head>
  <body>
    <h1>three-column re-orderable css layout</h1>

    <p>
      disclaimer ~ yes, I know it looks like an apache commons site circa 1999 :)
    </p>
    
    <h2>goal</h2>
    
    <p>
      Create a three-column html layout that re-orders when container's css class is
      changed, i.e., allow the cascade/specifity to do the re-ordering.
    </p>

    <p>
      Prior art - see especially page 94 from 
      <a href='http://www.amazon.com/dp/0596157606'>
        Brian Henick, "HTML and CSS: The Good Parts", O'Reilly', 2010
      </a>.
    </p>
    
    <p>
      Two main obstacles are that
    </p>
    
    <ol>
      <li>
         column widths should be set by page-specific rules
      </li>
      <li>
         column-3's width should not be percentage based (may be ems, though)
      </li>
      <li>
         (did I say two obstacles?) #3 is that nested 3-column layouts are doubly complicated - 
         they require doubly unsetting width rules (.nested .nested .col-# {}) - which is not best
         practice (OOCSS) for me but you can see what it might take to get this working on your own
         project without too much pain.
      </li>
    </ol>
    
    <h3>View the repo:</h3>
    <p>
      <a href='https://github.com/dfkaye/simple-3-column-css'>
        https://github.com/dfkaye/simple-3-column-css
      </a>
    </p>

    <h3>View the re-ordered layouts:</h3>
    <div id='orders'>
      <a href="#123">123</a>
      <a href="#132">132</a>
      <a href="#213">213</a>
      <a href="#231">231</a>
      <a href="#312">312</a>
      <a href="#321">321</a>      
    </div>
    
    <div class='demo'>
    
      <h2>simple three-column css</h2>
      <p>
        This test works cross-browser back to IE6.  The markup structure is fairly shallow.
      </p>

      <div id="simple" class="clearfix columns order-xyz">
        <div class="intercolumn">
          <div class="col-1">
            <h1>1. main section</h1>
            <p>main paragraph</p>
          </div>
          <div class="col-2">
            <h1>2. more section</h1>
            <p>more paragraph</p>
          </div>
        </div>
        <div class="col-3">
          <h1>3. related section</h1>
          <p>related paragraph</p>
        </div>
      </div>

      <h2>nested three-column css</h2>
      <p>
        This test works cross-browser back to IE7 (IE6 requires underscore hacks to fix the old
        "doubled margins in floated elements" bug - no, thanks).  
        The markup structure from the simple example is repeated in the nested columns, making 
        it a little harder on the eyes.
      </p>

      <div id="nested" class="clearfix columns order-xyz">
      
        <div class='clearfix'>
  
          <div class="intercolumn">
          
            <div class="col-1">
              <h2>123</h2>
              <div class="clearfix columns order-123">
                <div class="intercolumn">
                  <div class="col-1">
                    <h1>1. main section</h1>
                    <p>main paragraph</p>
                  </div>
                  <div class="col-2">
                    <h1>2. more section</h1>
                    <p>more paragraph</p>
                  </div>
                </div>
                <div class="col-3">
                  <h1>3. related section</h1>
                  <p>related paragraph</p>
                </div>
              </div>
            </div>
            
            <div class="col-2">
              <h2>132</h2>
              <div class="clearfix columns order-132">
                <div class="intercolumn">
                  <div class="col-1">
                    <h1>1. main section</h1>
                    <p>main paragraph</p>
                  </div>
                  <div class="col-2">
                    <h1>2. more section</h1>
                    <p>more paragraph</p>
                  </div>
                </div>
                <div class="col-3">
                  <h1>3. related section</h1>
                  <p>related paragraph</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-3">
            <h2>213</h2>
            <div class="clearfix columns order-213">
              <div class="intercolumn">
                <div class="col-1">
                  <h1>1. main section</h1>
                  <p>main paragraph</p>
                </div>
                <div class="col-2">
                  <h1>2. more section</h1>
                  <p>more paragraph</p>
                </div>
              </div>
              <div class="col-3">
                <h1>3. related section</h1>
                <p>related paragraph</p>
              </div>
            </div>
          </div>
          
        </div><!-- r1 -->

        <div class='clearfix'>
        
          <div class="intercolumn">
          
            <div class="col-1">
              <h2>231</h2>
              <div class="clearfix columns order-231">
                <div class="intercolumn">
                  <div class="col-1">
                    <h1>1. main section</h1>
                    <p>main paragraph</p>
                  </div>
                  <div class="col-2">
                    <h1>2. more section</h1>
                    <p>more paragraph</p>
                  </div>
                </div>
                <div class="col-3">
                  <h1>3. related section</h1>
                  <p>related paragraph</p>
                </div>
              </div>
            </div>
            
            <div class="col-2">
              <h2>312</h2>
              <div class="clearfix columns order-312">
                <div class="intercolumn">
                  <div class="col-1">
                    <h1>1. main section</h1>
                    <p>main paragraph</p>
                  </div>
                  <div class="col-2">
                    <h1>2. more section</h1>
                    <p>more paragraph</p>
                  </div>
                </div>
                <div class="col-3">
                  <h1>3. related section</h1>
                  <p>related paragraph</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-3">
            <h2>321</h2>
            <div class="clearfix columns order-321">
              <div class="intercolumn">
                <div class="col-1">
                  <h1>1. main section</h1>
                  <p>main paragraph</p>
                </div>
                <div class="col-2">
                  <h1>2. more section</h1>
                  <p>more paragraph</p>
                </div>
              </div>
              <div class="col-3">
                <h1>3. related section</h1>
                <p>related paragraph</p>
              </div>
            </div>
          </div>
        </div><!-- r2 -->
        
      </div><!-- nested -->
    </div>
  
    <script>
      /* unsexy vanilla-js */
      
      ;(function initdemo() {
        
        // layout boxes
        
        var tests = [
          document.getElementById('simple'),
          document.getElementById('nested')
        ];
        
        // jump links
        
        function next(order) {        
          for ( var i = 0; i < tests.length; i++) {
            var test = tests[i];
            test.className = test.className.replace(/order-[\w]{3,3}/, 'order-' + order);
          }
        }
  
        function showOrder(e) {
          var target = e.target || e.srcElement;
          var order = target.getAttribute('href');      
          if (!order) {
            return;
          }
          
          (e.preventDefault && e.preventDefault()) || (e.returnValue = false);
          
          next(order.split('#')[1]);
        }
  
        var orders = document.getElementById('orders');
        
        if (orders.addEventListener) {
          orders.addEventListener('click', showOrder, false);
        } else if (orders.attachEvent) {
          orders.attachEvent('onclick', showOrder);
        }
        

      }());
    </script>
  </body>
</html>
